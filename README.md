# Отчет
## Описание выбранной предметной области:
Предметная область базы данных книг включает управление информацией о книгах в библиотеке или книжном магазине. База данных содержит следующие поля:

1. id: Уникальный идентификатор записи о книге. Это первичный ключ для однозначного идентифицирования каждой записи.
2. title: Название книги. Текстовое поле, содержащее название произведения.
3. author: Автор книги. Текстовое поле с именем автора.
4. price: Цена книги. Числовое поле, содержащее стоимость книги.
5. publicationDate: Дата издания книги. Поле для хранения даты выхода книги в формате DateTime.
## Функции базы данных
Работа с базой данных осуществляется через графический интерфейс пользователя (GUI).
### Функция Load
#### Назначение функции
Функция Load отвечает за последовательную загрузку всех индексов из файлов в соответствующие таблицы (HashMap или словари). Индексы хранят дополнительные данные, которые позволяют оптимизировать поиск по критериям (автор, цена, название, дата и ID книги). Каждая подфункция загружает данные из отдельного файла и добавляет их в соответствующую структуру данных.
#### Описание работы функции
Функция Load состоит из вызова других методов:

LoadAuthor: Загружает индексы по авторам из файла index_author.dat.
LoadPrice: Загружает индексы по ценам из файла index_price.dat.
LoadIndex: Загружает индексы по ID книг из файла index.dat.
LoadName: Загружает индексы по названиям книг из файла index_name.dat.
LoadDate: Загружает индексы по датам издания книг из файла index_date.dat.
#### Временная сложность
Проверка существования файла: O(1) — проверка наличия файла на диске.
Чтение файла:
Если n — количество записей в файле, а m — количество позиций на запись:
Чтение ключа: O(1).
Чтение позиций: O(m).
Добавление в словарь: O(1) на каждую запись.
Таким образом, временная сложность каждой функции составляет O(n * m), где n — количество записей в файле, а m — количество позиций в каждой записи.
### Функция SaveAll
#### Назначение функции
Функция SaveAll выполняет сохранение данных из всех существующих таблиц (HashMap или словарей) в соответствующие бинарные файлы.
#### Описание работы функции
Вызов методов сохранения для каждого типа индекса:

SaveAuthor
SavePrice
SaveName
SaveIndex
SaveDate
Каждая из этих функций сохраняет данные, поочередно обрабатывая значения из соответствующих таблиц и записывая их в соответствующие файлы.
#### Временная сложность
Сохранение данных в файл: Для каждой записи из таблицы выполняется запись в файл, что требует:

1. Запись ключа — O(1).
2. Запись количества позиций — O(1).
3. Запись всех позиций — O(n), где n — количество записей в списке.
4. 
Таким образом, для каждой таблицы временная сложность будет O(n), где n — количество записей.
### Функция WriteRecord
#### Назначение функции
Функция WriteRecord реализует запись объекта BookRecord в бинарный файл. Помимо записи данных, функция обновляет вспомогательные индексы для ускоренного поиска записей по различным параметрам (ID, названию, автору, цене, дате).
#### Структура входных данных
BookRecord record:
Объект, представляющий книгу, содержащий поля:

ID (уникальный идентификатор книги).
Name (название книги).
Author (автор книги).
Price (цена книги).
Date (дата публикации книги).
string filePath:
Путь к бинарному файлу, в который будут записаны данные.
#### Временная сложность
Запись данных в файл: O(1).
Данные объекта записываются в бинарный файл в фиксированном порядке.

Обновление индексов:

1. Добавление записи в индекс по ключу — O(1).
2. Вставка в список значений (по имени, автору, цене, дате) — O(1).
3. Итоговая сложность обновления индексов — O(1) для каждой записи.

Сохранение индексов: Зависит от количества записей в индексах. В худшем случае — O(n), где n — количество записей.
### Функция SearchRecordById
#### Назначение функции
Функция SearchRecordById предназначена для поиска записей в бинарном файле по заданному идентификатору книги (idToFind). Она использует заранее построенный индекс indexTable, чтобы ускорить доступ к данным, хранящимся в файле.
#### Временная сложность
1. Проверка индекса:

Доступ к значению в словаре (indexTable.TryGetValue) выполняется за O(1).

2. Чтение записи из файла:

Операция чтения данных выполняется за O(1), так как запись находится по известной позиции.

Итоговая сложность — O(1) для успешного поиска записи.
### Фуекции SearchRecordsByAuthor, SearchRecordsByName, SearchRecordsByPrice, SearchRecordsByDate
#### Назначение функции
Функции предназначены для поиска записей книг по выбранному полю. Они использует индекс соответсующей таблицы для быстрого доступа к позициям записей в бинарном файле и возвращает список записей, соответствующих заданному значению поля.
#### Поиск в индексе:

1. Доступ к списку позиций в таблице выполняется за O(1).
2. Чтение записей из файла:

Для каждой позиции выполняется O(1) операция чтения записи. Если записей n, общая сложность чтения составляет O(n).

Итоговая сложность — O(n), где n — количество записей в индексе.
### Функция DeleteRecordbyId
#### Назначение функции
Функция DeleteRecordById предназначена для удаления записи из бинарного файла и всех связанных с ней индексов. Удаление записи осуществляется путем изменения ее ID на специальное значение (-1), что позволяет идентифицировать запись как удаленную. Также функция обновляет все индексы, удаляя информацию, связанную с этой записью.
#### Временная сложность
1. Поиск позиции в индексе:
Доступ к indexTable осуществляется за O(1).

2. Обновление файла:
Перезапись ID занимает O(1).

3. Обновление индексов:
Удаление позиции из списков индексов выполняется за O(k), где k — количество связанных индексов.

Итоговая сложность — O(k), где k зависит от количества индексов.
### Функции DeleteRecordbyName, DeleteRecordbyAuthor, DeleteRecordbyPrice, DeleteRecordbyDate
#### Назначение функции
Функции предназначена для удаления всех записей из бинарного файла и связанных индексов, которые соответствуют значению выбранного поля. Удаление производится путем изменения значения ID на -1, что обозначает запись как удаленную. Одновременно обновляются все индексы, чтобы гарантировать их консистентность.
#### Временная сложность
1. Поиск позиций в индексе таблиц:

Доступ к ключу в словаре занимает O(1).

2. Обход позиций и обновление индексов:

Для каждой записи обновляются 4 индекса, сложность которых зависит от количества записей, связанных с конкретным значением:
Удаление позиции из списка — O(k), где k — количество записей, связанных с данным индексом.
Итоговая сложность для n записей: O(n * k).
Итоговая сложность: O(n), где n — количество записей, связанных с указанной ценой.
### Функция EditRecordById
#### Назначение функции
Функция EditRecordById предназначена для редактирования записи в бинарном файле по заданному ID. Она позволяет изменить одно или несколько полей записи, обновляет данные в индексе, а затем сохраняет изменения. Если запись не найдена или происходит ошибка, функция возвращает false и отображает сообщение об ошибке.
#### Временная сложность
1. Поиск записи по ID:

Поиск позиции записи в indexTable — O(1).

2. Обновление индексов:

Для каждого измененного поля выполняются операции удаления и добавления в словарь — O(k), где k — количество записей для конкретного значения.

3. Чтение и запись файла:

Доступ к записи осуществляется по позиции — O(1).

4. Итоговая сложность:

O(m + k), где m — количество изменяемых полей, k — количество записей в индексе.
### Функция SaveToXlsx
#### Назначение функции
Функция SaveToXlsx экспортирует данные из бинарного файла базы данных в файл формата Excel (.xlsx). Она создает Excel-книгу, заполняет ее данными из записей и позволяет пользователю сохранить файл через диалог сохранения.

#### Cложность
1. Проверка существования файла:

O(1).

2. Чтение данных из бинарного файла:

Проход по всем записям в indexTable: O(n), где n — количество записей.

3. Запись данных в Excel:

Для каждой записи производится обращение к ячейкам листа — O(n).

4. Общая сложность:

O(n), где n — количество записей.
